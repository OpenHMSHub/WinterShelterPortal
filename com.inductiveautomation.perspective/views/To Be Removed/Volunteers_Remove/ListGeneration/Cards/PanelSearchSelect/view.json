{
  "custom": {
    "searchSelection": [],
    "selectedVolunteers": [
      {
        "age": 31,
        "column_10": "",
        "dob": "Sun Nov 05 1989 18:00:00 GMT-0600 (Central Standard Time)",
        "email": null,
        "firstName": "matthew",
        "gender": "Male",
        "humanId": 8578,
        "lastName": "Page",
        "phone": null,
        "rowId": 0
      },
      {
        "age": 39,
        "column_10": "",
        "column_9": "",
        "dob": "Fri Oct 16 1981 19:00:00 GMT-0500 (Central Daylight Time)",
        "email": null,
        "firstName": "Sean",
        "humanId": 1549,
        "lastName": "Williams",
        "phone": null,
        "rowId": 0
      },
      {
        "age": 37,
        "column_10": "",
        "column_9": "",
        "dob": "Sat Jun 11 1983 19:00:00 GMT-0500 (Central Daylight Time)",
        "email": null,
        "firstName": "Samuel",
        "humanId": 13386,
        "lastName": "Borders",
        "phone": null,
        "rowId": 3
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "drasonb@williamson-tn.org",
        "firstName": "Drason",
        "humanId": 15148,
        "lastName": "Beasley",
        "phone": "(615) 477-9815",
        "rowId": 8
      },
      {
        "age": 49,
        "column_10": "",
        "column_9": "",
        "dob": "Tue Mar 02 1971 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "paul.spivey@roomintheinn.org",
        "firstName": "Paul",
        "humanId": 33,
        "lastName": "Spivey",
        "phone": "6154191083",
        "rowId": 0
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "courtney.proffit@leadpublicschools.com",
        "firstName": "Proffit",
        "humanId": 15215,
        "lastName": "Courtney",
        "phone": null,
        "rowId": 4
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "stephen.francescon@piedmontng.com",
        "firstName": "Stephen",
        "humanId": 15271,
        "lastName": "Francescon",
        "phone": null,
        "rowId": 6
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": null,
        "firstName": "Katie",
        "humanId": 15127,
        "lastName": "Algers",
        "phone": null,
        "rowId": 7
      }
    ]
  },
  "params": {
    "groupId": "",
    "groupName": "",
    "selectedVolunteers": [
      {
        "age": 31,
        "column_10": "",
        "dob": "Sun Nov 05 1989 18:00:00 GMT-0600 (Central Standard Time)",
        "email": null,
        "firstName": "matthew",
        "gender": "Male",
        "humanId": 8578,
        "lastName": "Page",
        "phone": null,
        "rowId": 0
      },
      {
        "age": 39,
        "column_10": "",
        "column_9": "",
        "dob": "Fri Oct 16 1981 19:00:00 GMT-0500 (Central Daylight Time)",
        "email": null,
        "firstName": "Sean",
        "humanId": 1549,
        "lastName": "Williams",
        "phone": null,
        "rowId": 0
      },
      {
        "age": 37,
        "column_10": "",
        "column_9": "",
        "dob": "Sat Jun 11 1983 19:00:00 GMT-0500 (Central Daylight Time)",
        "email": null,
        "firstName": "Samuel",
        "humanId": 13386,
        "lastName": "Borders",
        "phone": null,
        "rowId": 3
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "drasonb@williamson-tn.org",
        "firstName": "Drason",
        "humanId": 15148,
        "lastName": "Beasley",
        "phone": "(615) 477-9815",
        "rowId": 8
      },
      {
        "age": 49,
        "column_10": "",
        "column_9": "",
        "dob": "Tue Mar 02 1971 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "paul.spivey@roomintheinn.org",
        "firstName": "Paul",
        "humanId": 33,
        "lastName": "Spivey",
        "phone": "6154191083",
        "rowId": 0
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "courtney.proffit@leadpublicschools.com",
        "firstName": "Proffit",
        "humanId": 15215,
        "lastName": "Courtney",
        "phone": null,
        "rowId": 4
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": "stephen.francescon@piedmontng.com",
        "firstName": "Stephen",
        "humanId": 15271,
        "lastName": "Francescon",
        "phone": null,
        "rowId": 6
      },
      {
        "age": 120,
        "column_10": "",
        "column_9": "",
        "dob": "Sun Dec 31 1899 18:00:00 GMT-0600 (Central Standard Time)",
        "email": null,
        "firstName": "Katie",
        "humanId": 15127,
        "lastName": "Algers",
        "phone": null,
        "rowId": 7
      }
    ]
  },
  "propConfig": {
    "custom.searchSelection": {
      "binding": {
        "config": {
          "path": "/root/Search.props.params.searchSelection"
        },
        "type": "property"
      },
      "persistent": true
    },
    "custom.selectedVolunteers": {
      "persistent": true
    },
    "params.groupId": {
      "paramDirection": "output",
      "persistent": true
    },
    "params.groupName": {
      "paramDirection": "output",
      "persistent": true
    },
    "params.selectedVolunteers": {
      "binding": {
        "config": {
          "path": "view.custom.selectedVolunteers"
        },
        "type": "property"
      },
      "paramDirection": "output",
      "persistent": true
    }
  },
  "props": {
    "defaultSize": {
      "height": 690,
      "width": 1100
    }
  },
  "root": {
    "children": [
      {
        "meta": {
          "name": "Search"
        },
        "position": {
          "basis": "320px",
          "grow": 1
        },
        "props": {
          "params": {
            "searchSelection": [],
            "selectedVolunteers": []
          },
          "path": "Volunteers/ListGeneration/Cards/VolunteerSearch",
          "style": {
            "borderStyle": "solid"
          }
        },
        "type": "ia.display.view"
      },
      {
        "meta": {
          "name": "Send"
        },
        "position": {
          "basis": "100px"
        },
        "props": {
          "path": "Volunteers/ListGeneration/Cards/VolunteerSend"
        },
        "type": "ia.display.view"
      },
      {
        "meta": {
          "name": "Select"
        },
        "position": {
          "basis": "320px",
          "grow": 1
        },
        "propConfig": {
          "props.params.selectedGroupId": {
            "binding": {
              "config": {
                "path": "view.params.groupId"
              },
              "type": "property"
            }
          },
          "props.params.selectedGroupName": {
            "binding": {
              "config": {
                "path": "view.params.groupName"
              },
              "type": "property"
            }
          },
          "props.params.selectedVolunteers": {
            "binding": {
              "config": {
                "bidirectional": true,
                "path": "view.custom.selectedVolunteers"
              },
              "type": "property"
            }
          }
        },
        "props": {
          "path": "Volunteers/ListGeneration/Cards/VolunteerSelect",
          "style": {
            "borderStyle": "solid"
          }
        },
        "type": "ia.display.view"
      }
    ],
    "meta": {
      "name": "root"
    },
    "props": {
      "style": {
        "classes": "Background/Default"
      }
    },
    "scripts": {
      "customMethods": [],
      "extensionFunctions": null,
      "messageHandlers": [
        {
          "messageType": "DeleteVolunteer",
          "pageScope": true,
          "script": "\thId \u003d payload[\u0027humanId\u0027]\n\tsystem.perspective.print(\u0027Delete Volunteer hId: %i\u0027 % hId)\n\t\n\tfor row in range(len(self.view.custom.selectedVolunteers)):\n\t\tsystem.perspective.print(\u0027row: %i\u0027 % (row))\n\t\tif self.view.custom.selectedVolunteers[row].humanId \u003d\u003d hId:\n\t\t\tself.view.custom.selectedVolunteers.pop(row)\n\t\t\tbreak\n\tsystem.perspective.print(\u0027Volunteer hId: %i deleted.\u0027 % hId)",
          "sessionScope": false,
          "viewScope": false
        },
        {
          "messageType": "AddVolunteer",
          "pageScope": true,
          "script": "\tsearch \u003d self.view.custom.searchSelection\n\tindex \u003d 0\n\tfor row in search:\n\t\tvalid \u003d True\n\t\thId \u003d row[\u0027humanId\u0027]\n\t\n\t\t#system.perspective.print(\u0027Adding Volunteer ID: %i\u0027 % hId)\n\t\t#Verify it\u0027s gretaer then -1\n\t\tif hId \u003c 0:\n\t\t\tvalid \u003d False\n\t\t\tsystem.perspective.print(\u0027Human Id not valid\u0027)\n\t\t#Verify the ID doesn\u0027t already exist in the list\n\t\tfor row in self.view.custom.selectedVolunteers:\n\t\t\tif row[\u0027humanId\u0027] \u003d\u003d hId:\n\t\t\t\tvalid \u003d False\n\t\t\t\tsystem.perspective.print(\u0027Duplicate Human Id\u0027)\n\t\tif valid:\n\t\t\tself.view.custom.selectedVolunteers.append(self.view.custom.searchSelection[index])\n\t\tindex +\u003d 1",
          "sessionScope": false,
          "viewScope": false
        },
        {
          "messageType": "ResetSearchResults",
          "pageScope": true,
          "script": "\tfor row in self.view.custom.selectedVolunteers:\n\t\tself.view.custom.selectedVolunteers.pop(0)\n\tself.view.params.groupId \u003d \"\"\n\tself.view.params.groupName\u003d \"\"",
          "sessionScope": false,
          "viewScope": false
        },
        {
          "messageType": "AddVolunteerGroupCreation",
          "pageScope": true,
          "script": "\tsearch \u003d payload[\"members\"]\n\tindex \u003d 0\n\tself.view.params.groupId \u003d payload[\"groupId\"]\n\tself.view.params.groupName \u003d payload[\"groupName\"]\n\tself.view.custom.selectedVolunteers \u003d payload[\"members\"]\n#\tfor row in search:\n#\t\tvalid \u003d True\n#\t\thId \u003d row[\u0027humanId\u0027]\n#\t\t\n#\t\t#system.perspective.print(\u0027Adding Volunteer ID: %i\u0027 % hId)\n#\t\t#Verify it\u0027s gretaer then -1\n#\t\tif hId \u003c 0:\n#\t\t\tvalid \u003d False\n#\t\t\tsystem.perspective.print(\u0027Human Id not valid\u0027)\n#\t\t#Verify the ID doesn\u0027t already exist in the list\n#\t\tfor row in self.view.custom.selectedVolunteers:\n#\t\t\tif row[\u0027humanId\u0027] \u003d\u003d hId:\n#\t\t\t\tvalid \u003d False\n#\t\t\t\tsystem.perspective.print(\u0027Duplicate Human Id\u0027)\n#\t\tif valid:\n#\t\t\trow[\"rowId\"] \u003d index\n#\t\t\tself.view.custom.selectedVolunteers.append(row)\n#\t\tindex +\u003d 1",
          "sessionScope": false,
          "viewScope": false
        },
        {
          "messageType": "SaveGroupMembers",
          "pageScope": true,
          "script": "\tif self.view.params.groupId !\u003d \"\":\n\t\tgroupId \u003d self.view.params.groupId\n\t\thumanIds \u003d \",\".join([str(x[\"humanId\"]) for x in self.getChild(\"Select\").props.params.selectedVolunteers])\n\t\tsql \u003d \"UPDATE staff.Volunteer SET staff.Volunteer.volunteerGroupId\u003d%s FROM staff.Volunteer V INNER JOIN humans.Human H on V.humanId\u003dH.id WHERE H.id in (%s);\" % (groupId, humanIds)\n\t\tresult \u003d system.db.runUpdateQuery(sql)\n\t\tsystem.perspective.navigate(\"/Volunteers/Groups/Detail/\"+str(groupId))",
          "sessionScope": false,
          "viewScope": false
        }
      ]
    },
    "type": "ia.container.flex"
  }
}